<header >
  <div class="left-section">
    <a href="/"> <div class="logo"><img src="\img\logo.jpg" alt="Logo"></div></a>
  </div>

  <div class="right-section">
    <a href="#" id="menu-item"><i class="material-icons">local_mall</i>Chuyến đi của tôi</a>
    <div class="dropdown">
      <a href="javascript:void(0);" onclick="toggleDropdown(event, 'dropdown-contact')">
        <i class="material-icons">call</i>Liên hệ
      </a>
      <div class="dropdown-content" id="dropdown-contact">
          <p><span class="material-icons icon">location_on</span> Khu phố 6, P.Linh Trung, Tp.Thủ Đức, Tp.Hồ Chí Minh</p>
          <p><span class="material-icons icon">mail</span> vivaviet.sgn@gmail.com</p>
          <p><span class="material-icons icon">contact_phone</span> (028)386 8386</p>
      </div>
    </div>
    <div class="dropdown">
      <a href="javascript:void(0);" id="menu-item" onclick="toggleDropdown(event, 'dropdownMenu')"><i class="material-icons">reorder</i>Danh mục</a>
      <div class="dropdown-content" id="dropdownMenu">
        <a href="#">Visa</a>
        <a href="#">Thông tin hữu ích</a>
        <a href="#">Về ViVaViet</a>
      </div>
    </div>
    <% if(isLoggedIn) { %>
      <div class="dropdown" id="logout">
        <button type="button" class="btn btn-primary dropdown-toggle" data-bs-toggle="dropdown">
          <i class="material-icons">account_circle</i>
        </button>
        <ul class="dropdown-menu">
          <li><a class="dropdown-item" href="/logout">Logout</a></li>
        </ul>
      </div>
    <% } else { %>
    <a href="/login" class="login-link"><i class="material-icons">account_circle</i>Đăng nhập</a>
    <% } %>
  </div>
</header>


<script>
  // Dropdown logic
  function toggleDropdown(event, menuId) {
    const dropdowns = document.querySelectorAll('.dropdown-content');
    const currentDropdown = document.getElementById(menuId);
    const isOpen = currentDropdown.style.display === 'block';

    // Đóng tất cả dropdown khác
    dropdowns.forEach(dropdown => {
      dropdown.style.display = 'none';
    });

    // Mở dropdown hiện tại
    currentDropdown.style.display = isOpen ? 'none' : 'block';

    // Đóng tất cả dropdown con khi mở hoặc đóng dropdown chính
    const subDropdowns = document.querySelectorAll('.option1-dropdown, .option2-dropdown');
    subDropdowns.forEach(subDropdown => {
      subDropdown.style.display = 'none';
    });

    event.stopPropagation();
  }

  function toggleOptionDropdown(event, optionId) {
    const optionDropdown = document.getElementById(optionId);
    const isOpen = optionDropdown.style.display === 'block';

    // Đóng tất cả dropdowns khác
    const optionDropdowns = document.querySelectorAll('.option1-dropdown, .option2-dropdown');
    optionDropdowns.forEach(dropdown => {
      dropdown.style.display = 'none';
    });

    // Nếu dropdown đã mở, thì đóng nó
    if (isOpen) {
      optionDropdown.style.display = 'none'; // Đóng dropdown
    } else {
      optionDropdown.style.display = 'block'; // Mở dropdown
    }
    event.stopPropagation();
  }

  // Đóng tất cả dropdown khi nhấn ra ngoài
  window.addEventListener('click', function(event) {
    const dropdowns = document.querySelectorAll('.dropdown-content, .option1-dropdown, .option2-dropdown');
    dropdowns.forEach(dropdown => {
      dropdown.style.display = 'none'; // Đóng tất cả dropdown
    });
  });
</script>
